<!DOCTYPE html>
<html>
<head>
  <title>Clinic Bill PDF Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input[type="text"], input[type="number"], input[type="date"] {
      width: 250px;
      padding: 5px;
      margin-top: 5px;
    }
    #bill {
      width: 350px;
      padding: 15px;
      border: 2px solid #333;
      font-family: Arial, sans-serif;
      background: #fff;
      color: #000;
      margin-top: 20px;
      display: none; /* hide initially */
    }
    #bill h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    #bill table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px;
    }
    #bill th, #bill td {
      border: 1px solid #666;
      padding: 8px;
      text-align: left;
    }
    #bill th {
      background: #eee;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Enter Clinic Bill Details</h1>

<label>Patient Name:
  <input type="text" id="patientName" placeholder="Enter patient name" required>
</label>

<label>Date:
  <input type="date" id="billDate" required>
</label>

<h3>Services</h3>

<div>
  <label>Service 1:
    <input type="text" id="service1" placeholder="Service description" required>
  </label>
  <label>Cost 1 (₹):
    <input type="number" id="cost1" min="0" value="0" required>
  </label>
</div>

<div>
  <label>Service 2:
    <input type="text" id="service2" placeholder="Service description" required>
  </label>
  <label>Cost 2 (₹):
    <input type="number" id="cost2" min="0" value="0" required>
  </label>
</div>

<div>
  <label>Service 3:
    <input type="text" id="service3" placeholder="Service description" required>
  </label>
  <label>Cost 3 (₹):
    <input type="number" id="cost3" min="0" value="0" required>
  </label>
</div>

<button id="generatePdfBtn">Generate PDF</button>

<!-- Hidden bill template to convert to PDF -->
<div id="bill">
  <h2>Dr Mani's Ortho Clinic</h2>
  <p><b>Patient:</b> <span id="billPatient"></span></p>
  <p><b>Date:</b> <span id="billDateText"></span></p>

  <table>
    <thead>
      <tr><th>Service</th><th>Cost (₹)</th></tr>
    </thead>
    <tbody>
      <tr><td id="billService1"></td><td id="billCost1"></td></tr>
      <tr><td id="billService2"></td><td id="billCost2"></td></tr>
      <tr><td id="billService3"></td><td id="billCost3"></td></tr>
      <tr><td><b>Total</b></td><td id="billTotal"></td></tr>
    </tbody>
  </table>
  <p>Thank you for choosing our clinic!</p>
</div>

<script>
  const generatePdfBtn = document.getElementById('generatePdfBtn');

  generatePdfBtn.addEventListener('click', () => {
    // Read input values
    const patientName = document.getElementById('patientName').value.trim();
    const billDate = document.getElementById('billDate').value;
    const service1 = document.getElementById('service1').value.trim();
    const cost1 = Number(document.getElementById('cost1').value);
    const service2 = document.getElementById('service2').value.trim();
    const cost2 = Number(document.getElementById('cost2').value);
    const service3 = document.getElementById('service3').value.trim();
    const cost3 = Number(document.getElementById('cost3').value);

    if (!patientName || !billDate || !service1 || !service2 || !service3) {
      alert('Please fill in all required fields');
      return;
    }

    // Calculate total
    const total = cost1 + cost2 + cost3;

    // Fill bill content
    document.getElementById('billPatient').textContent = patientName;
    document.getElementById('billDateText').textContent = new Date(billDate).toLocaleDateString();
    document.getElementById('billService1').textContent = service1;
    document.getElementById('billCost1').textContent = cost1.toFixed(2);
    document.getElementById('billService2').textContent = service2;
    document.getElementById('billCost2').textContent = cost2.toFixed(2);
    document.getElementById('billService3').textContent = service3;
    document.getElementById('billCost3').textContent = cost3.toFixed(2);
    document.getElementById('billTotal').textContent = total.toFixed(2);

    // Show bill (needed to capture by html2canvas)
    const billDiv = document.getElementById('bill');
    billDiv.style.display = 'block';

    // Generate PDF from bill div
    html2canvas(billDiv, { scale: 2 }).then(canvas => {
      const imgData = canvas.toDataURL('image/png');
      const pdf = new jspdf.jsPDF({
        orientation: 'portrait',
        unit: 'pt',
        format: [canvas.width, canvas.height]
      });
      pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
      pdf.save('clinic-bill.pdf');

      // Hide bill again after saving PDF
      billDiv.style.display = 'none';
    });
  });
</script>

</body>
</html>
