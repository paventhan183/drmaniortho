<!DOCTYPE html>
<html>
<head>
  <title>Clinic Bill PDF Generator2</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 400px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input[type="text"], input[type="number"], input[type="date"] {
      width: 100%;
      padding: 5px;
      margin-top: 5px;
      box-sizing: border-box;
    }
    #bill {
  width: 350px;
  padding: 15px;
  border: 2px solid #333;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #3a8dde, #f48fb1); /* Blue to pink gradient */
  color: white;  /* White text for contrast */
  margin-top: 20px;
  display: none;
}
    #bill h2, #bill h3 {
      text-align: center;
      margin-bottom: 5px;
    }
    #bill p {
      margin: 4px 0;
    }
    #bill table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px;
    }
    #bill th {
      background: rgba(255, 255, 255, 0.3);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.5);
      padding: 8px;
      text-align: left;
    }
    #bill td {
      border: 1px solid rgba(255, 255, 255, 0.5);
      padding: 8px;
      text-align: left;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Enter Clinic Bill Details</h1>

<!-- Only patient and services inputs visible -->
<label>Patient Name:
  <input type="text" id="patientName" placeholder="Enter patient name" required>
</label>
<label>Date:
  <input type="date" id="billDate" required>
</label>

<h3>Services</h3>

<div>
  <label>Service 1:
    <input type="text" id="service1" placeholder="Service description" required>
  </label>
  <label>Cost 1 (₹):
    <input type="number" id="cost1" min="0" value="0" required>
  </label>
</div>

<div>
  <label>Service 2:
    <input type="text" id="service2" placeholder="Service description" required>
  </label>
  <label>Cost 2 (₹):
    <input type="number" id="cost2" min="0" value="0" required>
  </label>
</div>

<div>
  <label>Service 3:
    <input type="text" id="service3" placeholder="Service description" required>
  </label>
  <label>Cost 3 (₹):
    <input type="number" id="cost3" min="0" value="0" required>
  </label>
</div>

<button id="generatePdfBtn">Generate PDF</button>

<!-- Hidden bill template with fixed clinic details -->
<div id="bill">
  <h2>Dr Mani's Ortho Speciality & General Clinic</h2>
  <p>68, Radha Nagar Main Road, opposite J2 Mahal, Chromepet, Chennai</p>
  <p><b>Phone:</b> +91 9876543210</p>
  <p><b>Doctor:</b> Dr Mani Arumugam, M.B.B.S., M.S., ORTHO</p>
  <p><b>Reg No:</b> MBBS123456</p>
  <hr>
  <p><b>Patient:</b> <span id="billPatient"></span></p>
  <p><b>Date:</b> <span id="billDateText"></span></p>

  <table>
    <thead>
      <tr><th>Service</th><th>Cost (₹)</th></tr>
    </thead>
    <tbody>
      <tr><td id="billService1"></td><td id="billCost1"></td></tr>
      <tr><td id="billService2"></td><td id="billCost2"></td></tr>
      <tr><td id="billService3"></td><td id="billCost3"></td></tr>
      <tr><td><b>Total</b></td><td id="billTotal"></td></tr>
    </tbody>
  </table>
  <p>Thank you for choosing our clinic!</p>
</div>

<script>
  const generatePdfBtn = document.getElementById('generatePdfBtn');

  generatePdfBtn.addEventListener('click', () => {
    // Fixed clinic details are hardcoded in the bill div, no input needed

    // Read patient & date
    const patientName = document.getElementById('patientName').value.trim();
    const billDate = document.getElementById('billDate').value;

    // Read services and costs
    const service1 = document.getElementById('service1').value.trim();
    const cost1 = Number(document.getElementById('cost1').value);
    const service2 = document.getElementById('service2').value.trim();
    const cost2 = Number(document.getElementById('cost2').value);
    const service3 = document.getElementById('service3').value.trim();
    const cost3 = Number(document.getElementById('cost3').value);

    if (!patientName || !billDate || !service1 || !service2 || !service3) {
      alert('Please fill in all required fields');
      return;
    }

    const total = cost1 + cost2 + cost3;

    // Fill bill patient and services details
    document.getElementById('billPatient').textContent = patientName;
    document.getElementById('billDateText').textContent = new Date(billDate).toLocaleDateString();
    document.getElementById('billService1').textContent = service1;
    document.getElementById('billCost1').textContent = cost1.toFixed(2);
    document.getElementById('billService2').textContent = service2;
    document.getElementById('billCost2').textContent = cost2.toFixed(2);
    document.getElementById('billService3').textContent = service3;
    document.getElementById('billCost3').textContent = cost3.toFixed(2);
    document.getElementById('billTotal').textContent = total.toFixed(2);

    // Show bill div to capture
    const billDiv = document.getElementById('bill');
    billDiv.style.display = 'block';

    // Generate PDF
    html2canvas(billDiv, { scale: 2 }).then(canvas => {
      const imgData = canvas.toDataURL('image/png');
      const pdf = new jspdf.jsPDF({
        orientation: 'portrait',
        unit: 'pt',
        format: [canvas.width, canvas.height]
      });
      pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
      const now = new Date();
      const timestamp = now.getFullYear().toString() +
        String(now.getMonth() + 1).padStart(2, '0') +
        String(now.getDate()).padStart(2, '0') + '_' +
        String(now.getHours()).padStart(2, '0') +
        String(now.getMinutes()).padStart(2, '0') +
        String(now.getSeconds()).padStart(2, '0');

      pdf.save(`clinic-bill_${timestamp}.pdf`);

      // Hide bill after download
      billDiv.style.display = 'none';
    });
  });
</script>

</body>
</html>
